---
title: Git Flow & å¸¸ç”¨Gitå‘½åå’Œæ“ä½œ
date: 2021-12-10
categories:
- git
tags:
- git flow
- gitå‘½ä»¤
---
## # ç®€è¿° Git Flow
ç®€å•æ¥è¯´ï¼Œ`Git Flow` å°±æ˜¯ä¸€å¥—è§„èŒƒçš„ä»£ç ç®¡ç†æµç¨‹
## # åˆ†æ”¯åº”ç”¨æƒ…æ™¯
- åœ¨`Git Flow`ä¸­ï¼Œä¸»è¦çš„åˆ†æ”¯æœ‰`master`ã€`develop`ã€`hotfix`ã€`release`ã€`feature` è¿™äº”ç§åˆ†æ”¯  
- `develop` å’Œ `master`ä¼šè¢«ä¿ç•™ï¼Œå…¶ä»–çš„éšä»»åŠ¡ç»“æŸè€Œåˆ é™¤  
### # master åˆ†æ”¯
- å­˜æ”¾ç¨³å®šä¸Šçº¿ç‰ˆæœ¬
- è¿™ä¸ªåˆ†æ”¯çš„æ¥æºåªèƒ½ä»åˆ«çš„åˆ†æ”¯åˆå¹¶è¿‡æ¥ï¼Œå¼€å‘è€…ä¸ä¼šç›´æ¥commitåˆ°è¿™ä¸ªåˆ†æ”¯ä¸Šã€‚
- é€šå¸¸æˆ‘ä»¬ä¹Ÿä¼šåœ¨è¿™ä¸ªåˆ†æ”¯ä¸Šçš„æäº¤æ‰“ä¸Šç‰ˆæœ¬å·æ ‡ç­¾ã€‚
### # develop åˆ†æ”¯
- è¿™ä¸ªåˆ†æ”¯ä¸»è¦æ˜¯æ‰€æœ‰å¼€å‘çš„åŸºç¡€åˆ†æ”¯ã€‚
- å½“è¦æ·»åŠ åŠŸèƒ½æ—¶ï¼Œæ‰€æœ‰åŠŸèƒ½éƒ½æ˜¯ä»è¿™ä¸ªåˆ†æ”¯åˆ‡å‡ºå»çš„ï¼Œè€ŒåŠŸèƒ½åˆ†æ”¯å®ç°åï¼Œä¹Ÿéƒ½ä¼šåˆå¹¶å›æ¥è¿™ä¸ªåˆ†æ”¯ä¸­ã€‚
### # hotfix åˆ†æ”¯
- ç”¨é€”ï¼šå¤„ç†ç´§æ€¥çº¿ä¸Šé—®é¢˜
- åŸºäºmasteråˆ†æ”¯åˆ›å»º
- ä¿®å¤å®Œæˆï¼Œåˆå¹¶åˆ°masteråˆ†æ”¯å’Œdevelopåˆ†æ”¯ä¸­
### # release åˆ†æ”¯ (é¢„ä¸Šçº¿åˆ†æ”¯)
- å½“`develop`åˆ†æ”¯å®Œæˆéœ€æ±‚åï¼Œå°±å¯ä»¥ä»`develop`åˆ†æ”¯ä¸­å¼€ä¸€ä¸ª`release`åˆ†æ”¯ï¼Œè¿›è¡Œä¸Šçº¿å‰æœ€åçš„æµ‹è¯•ã€‚
- æµ‹è¯•å®Œæˆåï¼Œé‡Šæ”¾`release`åˆ†æ”¯å°†ä¼šåŒæ—¶åˆå¹¶åˆ°`master`ä»¥åŠ`develop`åˆ†æ”¯ä¸­ã€‚
### # featureåˆ†æ”¯
- å½“æˆ‘ä»¬éœ€è¦è¡¥å……åŠŸèƒ½çš„æ—¶å€™ï¼Œå°±ä¼šä»developåˆ†æ”¯ä¸­å¼€ä¸€ä¸ªfeatureåˆ†æ”¯è¿›è¡ŒåŠŸèƒ½å¼€å‘ã€‚
- å½“åŠŸèƒ½å®ç°åï¼Œåœ¨å°†featureåˆ†æ”¯åˆå¹¶åˆ°developåˆ†æ”¯ä¸­ï¼Œç­‰å¾…æœ€åçš„æµ‹è¯•å‘å¸ƒã€‚
  
### # å…·ä½“åœºæ™¯
#### 1. æ–°åŠŸèƒ½å¼€å‘
> åŸºäº`develop`ï¼Œæ–°å»ºåŠŸèƒ½åˆ†æ”¯ `f1-feature`ï¼Œåˆ‡æ¢åˆ°è¯¥åˆ†æ”¯ä¸‹è¿›è¡Œå¼€å‘
éœ€è¦å¤šäººå¼€å‘æ—¶ï¼Œå¯ä»¥æ¨åˆ°è¿œç«¯åˆ†æ”¯
å®ŒæˆåŠŸèƒ½å¼€å‘ï¼Œå°†è¯¥åˆ†æ”¯åˆå¹¶åˆ°`develop`åˆ†æ”¯ï¼Œ**å¹¶åˆ é™¤`f1-feature`**åˆ†æ”¯

**2021/12/24 -- æ›´æ–°ï¼šä½¿ç”¨ `rebase` æ•´ç†æäº¤**  
å…³äºæ–°åˆ†æ”¯ï¼ˆå‘½å`f1-feature` æˆ–è€… `feat/xxx` ï¼‰  
**1. developæœ‰æ›´æ–°å†…å®¹éœ€è¦åŒæ­¥**  
```shell
# æäº¤ä»£ç 
git add .
git commit -m 'message'

# åˆ‡æ¢ develop æ‹‰å–ä»£ç 
git checkout develop
git pull

# åˆ‡æ¢ æœ¬åœ°åˆ†æ”¯ï¼ˆä¾‹ï¼šfeatureï¼‰ï¼Œåˆå¹¶ä»£ç 
git checkout feature
git rebase -i develop
```
-i æ„ä¸ºåˆå¹¶å¤šæ¬¡æäº¤ï¼Œè¿è¡Œåæ˜¾ç¤ºå‰å‡ æ¬¡çš„æäº¤å†…å®¹å¦‚ä¸‹ï¼š  
```
pick 281812b message1  
pick e60c7f4 message2  
```
å½“éœ€è¦åˆå¹¶æ‰€æœ‰æäº¤çš„æ—¶å€™ï¼Œä¿ç•™ä¸€ä¸ª`pick`ï¼Œå…¶ä½™ä¿®æ”¹ä¸º `s`ï¼Œå¦‚ä¸‹ï¼š 
```
pick 281812b message1  
s e60c7f4 message2  
```
`:wq` æäº¤ä¿®æ”¹

**ä»£ç å†²çªæ—¶ï¼Œä¿®æ”¹å†²çªåï¼Œé‡æ–°`add`æäº¤ï¼Œæ‰§è¡Œ`git commit`ï¼Œå±•ç¤º`message`ï¼Œæ ¹æ®éœ€æ±‚è‡ªè¡Œä¿®æ”¹ï¼Œå† `git rebase --continue`**  

**2. æœ¬åœ°åˆ†æ”¯å¼€å‘å®Œæ¯•éœ€è¦åˆå¹¶åˆ°develop** 

```shell
# å…ˆæäº¤æœ¬åœ°åˆ†æ”¯ä»£ç  add --> commit
git rebase -i develop
# åé¢çš„æ“ä½œå¦‚1æ‰€ç¤º
# éœ€è¦æ–°å¢çš„æ­¥éª¤ï¼šåˆ‡æ¢åˆ°developåˆ†æ”¯ï¼Œmerge æœ¬åœ°åˆ†æ”¯
git merge feature

# æœ€å git push
```
éœ€è¦æ³¨æ„çš„ç‚¹ï¼šåœ¨ `git rebase -i develop` çš„æ—¶å€™ï¼Œæ ¹æ®è‡ªèº«æƒ…å†µé€‰æ‹©å¯¹commitæ˜¯å¦è¿›è¡Œåˆå¹¶
#### 2. å‘å¸ƒä¸Šçº¿
åŸºäº`develop`åˆ†æ”¯åˆ›å»º`release-0.1`åˆ†æ”¯ä½œä¸ºé¢„ä¸Šçº¿åˆ†æ”¯,æœ‰é—®é¢˜ï¼Œåœ¨è¯¥åˆ†æ”¯ä¸Šä¿®æ”¹ï¼Œæœ€ååˆ‡æ¢åˆ°`develop`å’Œ`master`åˆ†æ”¯ä¸‹åˆå¹¶è¯¥åˆ†æ”¯ï¼Œåˆ é™¤`release-0.1`åˆ†æ”¯
#### 3.ç´§æ€¥bugä¿®å¤
åŸºäº`master`åˆ†æ”¯æ–°å»º`hotfix-bug1`åˆ†æ”¯è¿›è¡Œä¿®æ”¹ï¼Œä¿®æ”¹å®Œåˆ‡æ¢åˆ°`develop`å’Œ`master`åˆ†æ”¯ä¸‹åˆå¹¶è¯¥åˆ†æ”¯ï¼Œåˆ é™¤`hotfix-bug1`åˆ†æ”¯
### # å¸¸ç”¨gitæ“ä½œ
**åˆ†æ”¯ç›¸å…³**
```
// æŸ¥çœ‹æœ¬åœ°åˆ†æ”¯
git branch
è¿”å›ğŸŒ°
*master

// æŸ¥çœ‹è¿œç¨‹åˆ†æ”¯
git branch -r
è¿”å›ğŸŒ°
origin/master

// æŸ¥çœ‹æœ¬åœ°å’Œè¿œç¨‹åˆ†æ”¯
git branch -a
è¿”å›ğŸŒ°
*master
 remotes/origin/master
 
// åˆ‡æ¢åˆ†æ”¯
git checkout <branch-name>

// åˆ›å»ºå¹¶åˆ‡æ¢åˆ°è¯¥åˆ†æ”¯
git checkout -b <branch-name>

// åˆ é™¤åˆ†æ”¯
git branch -d <branch-name>

// åˆ é™¤è¿œç«¯åˆ†æ”¯
git push origin -d <branch-name>

// é‡å‘½ååˆ†æ”¯
git branch -m <oldbranch-name> <newbranch-name>

// åˆå¹¶æŒ‡å®šåˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯
git merge <branch-name>
```



